# Variables
EXE	= sudoku

# Usual compilation flags
CFLAGS	= -std=c99 -Wall -Wextra -O2
CPPFLAGS= -I../include
LDFLAGS	= -L. -lm -lpset

# Special
.PHONY: all clean help

# Rules and targets
all: $(EXE)

$(EXE): sudoku.o libpset.a
	$(CC) sudoku.o -o $(EXE) $(LDFLAGS)

sudoku.o: sudoku.c sudoku.h ../include/preemptive_set.h
	$(CC) $(CFLAGS) $(CPPFLAGS) -c sudoku.c

libpset.a: preemptive_set.o
	$(AR) rcs libpset.a preemptive_set.o

preemptive_set.o: preemptive_set.c ../include/preemptive_set.h
	$(CC) $(CFLAGS) $(CPPFLAGS) -c preemptive_set.c

clean:
	rm *.o libpset.a $(EXE)

help:
	@echo -e "make [all]\t\tBuild the software"
	@echo -e "make clean\t\tRemove all files generated by make"
	@echo -e "make help\t\tDisplay this help"
